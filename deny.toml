[bans]
multiple_versions = "deny"
deny = [
    { name = "openssl" },
]
skip = [
    # rand transitively depends on multiple versions of rand_core :(
    { name = "rand_core", version = "=0.3.1" },

    # All these duplicates come from reqwest, which is only a dev-dependency,
    # so we are ok with them as they only affect this crate itself, not downstream ones

    # tokio-reactor uses old versions of parking_lot
    { name = "lock_api", version = "=0.1.5" },
    { name = "parking_lot", version = "=0.7.1" },
    { name = "parking_lot_core", version = "=0.4.0" },
    { name = "scopeguard", version = "=0.3.3" },
    # mime-guess transitively depends on multiple versions of unicase :(
    { name = "unicase", version = "=1.4.2" },
    # mio depends on old versions of winapi
    { name = "winapi", version = "=0.2.8" },
]

[licenses]
unlicensed = "deny"
unknown = "deny"
# We want really high confidence when inferring licenses from text
confidence_threshold = 0.92
allow = [
    "Embark-Proprietary",
    "Apache-2.0",
    "BSD-2-Clause",
    "BSD-2-Clause-FreeBSD",
    "BSD-3-Clause",
    "BSL-1.0",
    "CC0-1.0",
    "FTL",
    "ISC",
    "LLVM-exception",
    "MIT",
    "MPL-2.0",
    "Unicode-DFS-2016",
    "Unlicense",
    "Zlib",
]
skip = [
    # ring has a rather complicated LICENSE file due to reasons spelled out
    # in said LICENSE file, but is basically OpenSSL for older parts, and ISC
    # for newer parts
    { name = "ring", licenses = [] },
    # webpki uses an ISC license but it only has a 0.83 confidence level
    { name = "webpki", licenses = [] },
]

[[licenses.ignore]]
name = "rustls"
license_files = [
    # This is a top-level LICENSE that just spells out the *actual* 3
    # licenses that can be used with the crate, which askalono is unable
    # to score
    { path = "LICENSE", hash = 0xe567c411 },
]

[[licenses.ignore]]
name = "ct-logs"
license_files = [
    # This license is copied from rustls
    { path = "LICENSE", hash = 0xe567c411 },
]

[[licenses.ignore]]
name = "hyper-rustls"
license_files = [
    # This license is copied from rustls
    { path = "LICENSE", hash = 0x3154a1c7 },
]

[[licenses.ignore]]
name = "sct"
license_files = [
    # Exact same scenario as with rustls et al
    { path = "LICENSE", hash = 0xb7619ae7 },
]

# [[licenses.ignore]]
# name = "crossbeam-channel"
# license_files = [
#     # This contains multiple licenses which lowers confidence scores,
#     # but is basically a CC-BY-3.0
#     { path = "LICENSE-THIRD-PARTY", hash = 0xc6242648 },
# ]

[[licenses.ignore]]
name = "ring"
license_files = [
    { path = "LICENSE", hash = 0xbd0eed23 },
]

[[licenses.ignore]]
name = "webpki-roots"
license_files = [
    # This appears to be an automatically generated file, but does
    # contain a MPL-2.0 license in the text, which is also used
    # in the license field
    { path = "LICENSE", hash = 0x6c919c48 },
]

[[licenses.ignore]]
name = "webpki"
license_files = [
    # askalono can correctly identify the license as ISC, but it
    # has a lower confidence of ~0.83 due to modifications, so
    # ignore it specifically so we can raise our confidence threshold
    # quite high so other licenses don't slip through
    { path = "LICENSE", hash = 0x1c7e6c },
]
